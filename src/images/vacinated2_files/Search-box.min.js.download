"use strict";function GetQueryStringParameteres(){for(var queryParams=[],params=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),i=0;i<params.length;i++){var name=params[i].split("=")[0],value=params[i].split("=")[1];queryParams[name]=value}return queryParams}function GetPreselectedValues(data,loaded){if(!loaded)return null;for(var preselectedValues=[],i=0;i<loaded.length;i++)for(var j=0;j<data.length;j++)data[j].Value==loaded[i]&&preselectedValues.push(data[j]);return preselectedValues}!function($){$(document).ready(function(){$("#current-culture").val();for(var searchInput=$('input[type="search"]'),searchClearIcon=searchInput.closest(".input-wrapper").find(".k-icon"),searchBoxIdFields=$('[data-sf-role="searchTextBoxId"]'),i=0;i<searchBoxIdFields.length;i++){var searchBoxIdField=$(searchBoxIdFields[i]);featherSearchBoxWidget({resultsUrl:searchBoxIdField.siblings('[data-sf-role="resultsUrl"]').first().val(),indexCatalogue:searchBoxIdField.siblings('[data-sf-role="indexCatalogue"]').first().val(),wordsMode:searchBoxIdField.siblings('[data-sf-role="wordsMode"]').first().val(),disableSuggestions:$.parseJSON(searchBoxIdField.siblings('[data-sf-role="disableSuggestions"]').first().val()),minSuggestionLength:searchBoxIdField.siblings('[data-sf-role="minSuggestionLength"]').first().val(),suggestionFields:searchBoxIdField.siblings('[data-sf-role="suggestionFields"]').first().val(),language:searchBoxIdField.siblings('[data-sf-role="language"]').first().val(),suggestionsRoute:searchBoxIdField.siblings('[data-sf-role="suggestionsRoute"]').first().val(),searchTextBoxSelector:searchBoxIdField.val(),searchButtonSelector:searchBoxIdField.siblings('[data-sf-role="searchButtonId"]').first().val()})}function featherSearchBoxWidget(serverData){var query,_char="*",searchTexBoxIsEmpty=!0,searchTextBox=$(serverData.searchTextBoxSelector);$(serverData.searchButtonSelector).click(navigateToResults),searchTextBox.keypress(function(e){e||(e=window.event);var keyCode=null;keyCode=e.keyCode?e.keyCode:e.charCode;13==keyCode&&navigateToResults(e)}),searchTextBox.val()==_char&&searchTextBox.val("");var country="country",healthtopic="healthtopic",queryParams=GetQueryStringParameteres();if(1<Object.keys(queryParams).length&&(queryParams[healthtopic]&&queryParams[healthtopic].split(","),queryParams[country]&&queryParams[country].split(",")),!serverData.disableSuggestions){searchTextBox.keyup(function(e){if(38!=e.keyCode&&40!=e.keyCode&&27!=e.keyCode){13==e.keyCode&&navigateToResults(e);var request={},searchText=searchTextBox.val().trim();searchText.length>=serverData.minSuggestionLength&&(request.IndexName=serverData.indexCatalogue,request.SuggestionFields=serverData.suggestionFields,request.Text=searchText,request.Language=serverData.language,$.ajax({type:"GET",url:serverData.suggestionsRoute,dataType:"json",data:request,success:suggestionsSuccessHandler}))}});try{searchTextBox.autocomplete({source:[],messages:{noResults:"",results:function(){}},select:function(event,ui){searchTextBox.val(ui.item.value),navigateToResults(event)}}).autocomplete("widget").addClass("sf-autocomplete")}catch(e){}}function suggestionsSuccessHandler(result,args){var dataSource=result.Suggestions;searchTextBox.autocomplete("option","source",dataSource),searchTextBox.autocomplete("search",searchTextBox.val().trim())}function navigateToResults(e){e||(e=window.event),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0,e.preventDefault?e.preventDefault():e.returnValue=!1,searchTexBoxIsEmpty=!(searchTextBox.val()&&searchTextBox.val().trim()||null===$("#multiselectHealthTopic").val()&&null===$("#multiselectCountries").val()),query=searchTexBoxIsEmpty?_char:searchTextBox.val()==_char?"":searchTextBox.val(),serverData.indexCatalogue&&(window.DataIntelligenceSubmitScript&&DataIntelligenceSubmitScript._client.sentenceClient.writeSentence({predicate:"Search for",object:searchTextBox.val(),objectMetadata:[{K:"PageUrl",V:location.href}]}),window.location=function(){var queryLocation=query.trim(),catalogueParam=(-1==serverData.resultsUrl.indexOf("?")?"?":"&")+"indexCatalogue="+encodeURIComponent(serverData.indexCatalogue),searchQueryParam="&searchQuery="+encodeURIComponent(queryLocation),wordsModeParam="&wordsMode="+serverData.wordsMode,healthTopicParam="&"+healthtopic+"="+$("#multiselectHealthTopic").val(),countryParam="&"+country+"="+$("#multiselectCountries").val(),url=serverData.resultsUrl+catalogueParam+searchQueryParam+wordsModeParam;null!==$("#multiselectHealthTopic").val()&&(url+=healthTopicParam);null!==$("#multiselectCountries").val()&&(url+=countryParam);return url}())}searchInput.keyup(function(){0<$(this).val().length?searchClearIcon.show():searchClearIcon.hide()}),searchInput.on("focus",function(){0<$(this).val().length&&searchClearIcon.show()}),searchClearIcon.on("click",function(e){$('input[type="search"]').val(""),searchClearIcon.hide()})}setTimeout(function(){$(".filters-item").each(function(){$(this).css("display","block"),""!=$("#multiselectHealthTopic_taglist")&&$("#multiselectHealthTopic_taglist").insertAfter("#multiselectHealthTopic"),""!=$("#multiselectCountries_taglist")&&$("#multiselectCountries_taglist").insertAfter("#multiselectCountries")})},500)})}(jQuery),jQuery.ui.autocomplete.prototype._resizeMenu=function(){this.menu.element.outerWidth(this.element.outerWidth())};